(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/reading_list/index"],{"42ed":function(t,i,n){"use strict";n.r(i);var e=n("c8c7"),s=n.n(e);for(var a in e)"default"!==a&&function(t){n.d(i,t,(function(){return e[t]}))}(a);i["default"]=s.a},7839:function(t,i,n){"use strict";var e;n.d(i,"b",(function(){return s})),n.d(i,"c",(function(){return a})),n.d(i,"a",(function(){return e}));var s=function(){var t=this,i=t.$createElement,n=(t._self._c,"1"==t.is_zhe_show&&void 0!=t.tiList[t.current]&&"0"==t.is_show_result&&"2"==t.tiList[t.current].type?t.__map(t.tiList[t.current].answer.ans,(function(i,n){var e=t.__get_orig(i),s="is_checked"==t.dingxiang.abc[t.current][n]?t.tiList[t.current].answer.rs.indexOf(n):null,a="is_checked"==t.dingxiang.abc[t.current][n]&&"-1"==s?t.tiList[t.current].answer.rs.indexOf(n):null,r="is_checked"==t.dingxiang.abc[t.current][n]&&"-1"==s?t.dingxiang.ans[t.current].indexOf(n):null;return{$orig:e,g0:s,g1:a,g2:r}})):null);t.$mp.data=Object.assign({},{$root:{l0:n}})},a=[]},"869c":function(t,i,n){"use strict";n.r(i);var e=n("7839"),s=n("42ed");for(var a in s)"default"!==a&&function(t){n.d(i,t,(function(){return s[t]}))}(a);n("f16f");var r,c=n("f0c5"),o=Object(c["a"])(s["default"],e["b"],e["c"],!1,null,null,null,!1,e["a"],r);i["default"]=o.exports},a16f:function(t,i,n){"use strict";(function(t){n("b8f1");e(n("66fd"));var i=e(n("869c"));function e(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=n,t(i.default)}).call(this,n("543d")["createPage"])},be36:function(t,i,n){},c8c7:function(t,i,n){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e=s(n("cf5a"));function s(t){return t&&t.__esModule?t:{default:t}}function a(t,i,n){return i in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}var r=getApp(),c=t.getBackgroundAudioManager({}),o={data:function(){return{is_show_result:"0",start_time:0,reading_id:"0",info:[],index:-1,is_zhe_show:"0",is_zhe_top:"0",scrollH:0,check_ti:"",tiList:[],current:"0",tilist_c:{},currentQid:1,ti_info_abc:["A","B","C","D","E","F","G","H"],right_cuo:[],user_answer:{dui_num:0,cuo_num:0,ti_data:[]},panduan:{is_end:"0"},user_ans:{},dingxiang:{ans:[],key:{0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7"},start_check:[],abc:[]},result:{}}},onShow:function(){""!=r.globalData.userInfo||t.navigateTo({url:"../login/index"})},onReady:function(){var i=this;t.getSystemInfo({success:function(t){i.windowHeight=t.windowHeight,i.scrollH=750*t.windowHeight/t.windowWidth-450,i.scrollH=750*t.windowHeight/t.windowWidth-parseInt(t.safeArea.top)-530}})},onUnload:function(){c.stop()},onLoad:function(t){var i=this,n=r.globalData.site_url+"/appapi/?s=Home.getReadingList";e.default.requestApi(n,{id:t.id}).then((function(t){if(i.info=t.data.info[0],void 0!=t.data.info[0].list)for(var n=0;n<t.data.info[0].list.length;n++){var e=t.data.info[0].list[n];e.playInfo={isplay:0,length:"00:00"}}}))},methods:{resetDati:function(){for(var t in this.current="0",this.is_show_result="0",this.user_ans.length=0,this.start_time=0,this.currentQid="1",this.right_cuo.length=0,this.user_answer.ti_data.length=0,this.user_ans={},this.tiList)this.dingxiang.ans[t]=[],this.dingxiang.abc[t]=[];this.result={}},datiAgain:function(){this.resetDati()},backIndex:function(){t.reLaunch({url:"../index/index"})},closeDati:function(i){var n,e=this,s=this;"0"==i&&t.showModal((n={title:"是否退出本次答题?",content:"退出后，本次答题不计入成绩",showCancel:!1,cancelText:"取消",cancelColor:"#969696"},a(n,"showCancel",!0),a(n,"confirmText","确认退出"),a(n,"confirmColor","#FE5A13"),a(n,"success",(function(t){t.confirm&&(s.is_zhe_show="0",s.is_zhe_top="0",e.resetDati())})),a(n,"fail",(function(){})),a(n,"complete",(function(){})),n));"1"==i&&(s.is_zhe_show="0",s.is_zhe_top="0")},checkDingxiang:function(t){0==this.start_time&&(this.start_time=Date.now());var i=this.current;if("is_checked"!=this.dingxiang.abc[i][t]){this.dingxiang.abc[i][t]="is_checked",this.$set(this.dingxiang.abc[i],t,"is_checked");var n=this.tiList[i].answer.rs;n.split(",");for(var e in this.dingxiang.key)this.dingxiang.key[e]++;var s=this.tiList[this.current].id;void 0==this.user_ans[s]&&(this.user_ans[s]=[]);var a=this.dingxiang.ans[i];"-1"!=a.indexOf(t)?(this.dingxiang.ans[i].splice(a.indexOf(t),1),this.dingxiang.abc[i][t]="is_checked",this.$set(this.dingxiang.abc[i],t,"is_checked"),this.user_ans[s].splice(a.indexOf(t),1)):(this.dingxiang.ans[i].push(t),this.dingxiang.abc[i][t]="is_checked",this.$set(this.dingxiang.abc[i],t,"is_checked"),console.log(this.user_ans),this.user_ans[s].push(t)),this.user_answer.ti_data[this.current]="is_end"}},checkDanxuan:function(t){0==this.start_time&&(this.start_time=Date.now());var i=this.tiList[this.current].answer.rs;"is_end"!=this.user_answer.ti_data[this.current]&&this.setAnsCache(i,t)},checkPanduan:function(t){if(0==this.start_time&&(this.start_time=Date.now()),"is_end"!=this.user_answer.ti_data[this.current]){this.tiList[this.current].id.toString();var i=this.tiList[this.current].answer.rs;this.setAnsCache(i,t)}},setAnsCache:function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",e=this;r.globalData;e.user_answer.ti_data[e.current]="is_end",e.$set(e.user_answer.ti_data,e.current,"is_end"),""==n&&(t==i?(e.user_answer.dui_num++,e.right_cuo[e.current]="1",e.$set(e.right_cuo,e.current,"1")):(e.user_answer.cuo_num++,e.right_cuo[e.current]="0",e.$set(e.right_cuo,e.current,"0")),console.log(e.right_cuo),e.user_ans[e.tiList[e.current].id]=i)},getTestsList:function(){var i=this;t.request({url:r.globalData.site_url+"/appapi/?s=Tests.getTestsList",method:"GET",data:{reading_id:this.reading_id,uid:r.globalData.userInfo.id,token:r.globalData.userInfo.token},success:function(n){var e=n.data.data.code;if(0==e||(t.showToast({icon:"none",title:n.data.data.msg}),700!=e)){var s=n.data.data.info[0];if(s.length<1)i.tiList.length=0;else{for(var a in s)s[a].answer=JSON.parse(s[a].answer),i.dingxiang.ans[a]=[],i.dingxiang.abc[a]=[];i.tiList=s}}else t.navigateTo({url:"../login/index"})},fail:function(){t.showToast({title:"网络错误,请重试"})}})},checkTi:function(i){if(this.check_ti=i,"1"==i){if("0"==this.current)return;this.current--,this.currentQid--}if("2"==i){if("is_end"!=this.user_answer.ti_data[this.current])return void t.showToast({icon:"none",title:"请先答当前题目"});this.current==this.tiList.length-1&&this.subTests(),this.current++,this.currentQid++}},subTests:function(){var i=this,n=r.globalData.site_url+"/appapi/?s=Tests.subTests";t.request({url:n,method:"GET",data:{uid:r.globalData.userInfo.id,token:r.globalData.userInfo.token,testsid:i.reading_id,answer:JSON.stringify(i.user_ans),start_time:i.start_time},success:function(n){if(0==n.data.data.code){i.result=n.data.data.info;var e=n.data.data.info["res_score"];e>0&&t.showToast({title:"积分+"+e,image:"../../static/images/jifen_shan.png",mask:!0}),setTimeout((function(){i.is_show_result="1"}),1e3)}else t.showToast({icon:"none",title:"提交失败, 请重试"})},fail:function(){t.showToast({icon:"none",title:"网络错误"})}})},play:function(t){var i=t.currentTarget.dataset.index,n=t.currentTarget.dataset.isplay,e=t.currentTarget.dataset.url;this.info;-1!=this.index&&this.index!=i&&(this.info.list[this.index].playInfo.isplay=2),c.title=this.info.list[i].title,0==n&&(this.info.list[i].playInfo.isplay=1,c.src=e,c.play()),1==n&&(this.info.list[i].playInfo.isplay=2,this.index!=i&&(c.src=e),c.pause()),2==n&&(this.info.list[i].playInfo.isplay=1,this.index!=i&&(c.src=e),c.play()),this.$forceUpdate(),this.index=i,this.reading_id=t.currentTarget.dataset.id,this.getTestsList()}},created:function(){var t=this;c.onEnded((function(){t.tiList.length<1||(t.is_zhe_show="1",t.is_zhe_top="1")}))}};i.default=o}).call(this,n("543d")["default"])},f16f:function(t,i,n){"use strict";var e=n("be36"),s=n.n(e);s.a}},[["a16f","common/runtime","common/vendor"]]]);