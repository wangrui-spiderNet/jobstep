(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/question/question"],{"2cb4":function(t,i,n){},"3b77":function(t,i,n){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;e(n("cf5a"));function e(t){return t&&t.__esModule?t:{default:t}}function s(t,i,n){return i in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}var a=getApp(),r={components:{},data:function(){return{start_time:0,is_zhe_show:"0",is_zhe_top:"0",is_show_result:"0",scrollH:0,check_ti:"",tiList:[],current:"0",tilist_c:{},currentQid:1,ti_info_abc:["A","B","C","D","E","F","G","H"],right_cuo:[],user_answer:{dui_num:0,cuo_num:0,ti_data:[]},panduan:{is_end:"0"},user_ans:{},dingxiang:{ans:[],key:{0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7"},start_check:[],abc:[]},tiankong:{ans:[],sub:[],right_ans:[],start_check:[]},result:{},duihao:"../../static/images/tongji_duihao.png",cuohao:"../../static/images/tongji_cuohao.png",timeNums:[],tophight:0}},onReady:function(){if(""!=a.globalData.userInfo){var i=this;t.getSystemInfo({success:function(t){i.windowHeight=t.windowHeight,i.scrollH=750*t.windowHeight/t.windowWidth-700,i.scrollH=750*t.windowHeight/t.windowWidth-parseInt(t.safeArea.top)-740}}),this.getTestsList(),0==this.start_time&&(this.start_time=Date.now()),this.tophight=t.getMenuButtonBoundingClientRect().top+8}else t.navigateTo({url:"../login/index"})},methods:{fanhui:function(){t.reLaunch({url:"../index/index"})},setTimeJs:function(t){var i=this,n=40,e=setInterval((function(){i.$set(i.timeNums,t,--n),n<1&&clearInterval(e)}),1e3)},onInput:function(t){""!=t.detail.value&&(this.tiankong.start_check[this.current],this.$set(this.tiankong.start_check,this.current,"1"))},subTiankong:function(){var i=this.checkAnswerTime();if(!1!==i){var n=this.tiankong.ans,e=0;for(var s in n[this.current])""==n[this.current][s]&&e++;if(e!=n[this.current].length){var a=this.tiList[this.current].id;this.tiankong.sub[a]="1",this.user_ans[this.tiList[this.current].id]=this.tiankong.ans[this.current],this.setAnsCache(this.tiList[this.current].answer.ans,this.tiankong.ans[this.current],"4")}else t.showToast({icon:"none",title:"答案不能为空"})}else t.showToast({icon:"none",title:"您已超时, 无法作答"})},datiAgain:function(){this.resetDati()},backIndex:function(){t.reLaunch({url:"../index/index"})},closeDati:function(i){var n,e=this,a=this;"0"==i&&t.showModal((n={title:"是否退出本次答题?",content:"退出后，本次答题不计入成绩",showCancel:!1,cancelText:"取消",cancelColor:"#969696"},s(n,"showCancel",!0),s(n,"confirmText","确认退出"),s(n,"confirmColor","#FE5A13"),s(n,"success",(function(t){t.confirm&&(a.is_zhe_show="0",a.is_zhe_top="0",e.resetDati())})),s(n,"fail",(function(){})),s(n,"complete",(function(){})),n));"1"==i&&(a.is_zhe_show="0",a.is_zhe_top="0")},checkAnswerTime:function(){return!(this.timeNums[this.current]<1)},checkDingxiang:function(i){var n=this.checkAnswerTime();if(!1!==n){var e=this.current;if("is_checked"!=this.dingxiang.abc[e][i]){this.dingxiang.abc[e][i]="is_checked",this.$set(this.dingxiang.abc[e],i,"is_checked");var s=this.tiList[e].answer.rs;s.split(",");for(var a in this.dingxiang.key)this.dingxiang.key[a]++;var r=this.tiList[this.current].id;void 0==this.user_ans[r]&&(this.user_ans[r]=[]);var c=this.dingxiang.ans[e];"-1"!=c.indexOf(i)?(this.dingxiang.ans[e].splice(c.indexOf(i),1),this.dingxiang.abc[e][i]="is_checked",this.$set(this.dingxiang.abc[e],i,"is_checked"),this.user_ans[r].splice(c.indexOf(i),1)):(this.dingxiang.ans[e].push(i),this.dingxiang.abc[e][i]="is_checked",this.$set(this.dingxiang.abc[e],i,"is_checked"),this.user_ans[r].push(i)),this.user_answer.ti_data[this.current]="is_end"}}else t.showToast({icon:"none",title:"您已超时, 无法作答"})},checkDanxuan:function(i){var n=this.checkAnswerTime();if(!1!==n){var e=this.tiList[this.current].answer.rs;"is_end"!=this.user_answer.ti_data[this.current]&&this.setAnsCache(e,i)}else t.showToast({icon:"none",title:"您已超时, 无法作答"})},checkPanduan:function(i){var n=this.checkAnswerTime();if(!1!==n){if("is_end"!=this.user_answer.ti_data[this.current]){this.tiList[this.current].id.toString();var e=this.tiList[this.current].answer.rs;this.setAnsCache(e,i)}}else t.showToast({icon:"none",title:"您已超时, 无法作答"})},setAnsCache:function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",e=this;a.globalData;if(e.user_answer.ti_data[e.current]="is_end",e.$set(e.user_answer.ti_data,e.current,"is_end"),""==n&&(t==i?(e.right_cuo[e.current]="1",e.$set(e.right_cuo,e.current,"1")):(e.right_cuo[e.current]="0",e.$set(e.right_cuo,e.current,"0")),e.user_ans[e.tiList[e.current].id]=i),"4"==n){e.tiankong.right_ans[e.current]="";for(var s=0;s<t.length;s++)t.length>1?e.tiankong.right_ans[e.current]+=s+1+"."+t[s][0]+" \n":e.tiankong.right_ans[e.current]+=s+1+"."+t[s][0]+" "}},getTestsList:function(){var i=this;t.request({url:a.globalData.site_url+"/appapi/?s=Tests.getTestsListIndex",method:"GET",data:{uid:a.globalData.userInfo.id,token:a.globalData.userInfo.token},success:function(n){if(void 0!=n.data.data){var e=n.data.data.code;if(0==e||(t.showToast({icon:"none",title:n.data.data.msg}),700!=e)){var s=n.data.data.info[0];if(!(s.length<1)){for(var a in s)s[a].answer=JSON.parse(s[a].answer),i.dingxiang.ans[a]=[],i.dingxiang.abc[a]=[],i.tiankong.ans[a]=[],i.timeNums[a]=40;i.tiList=s,i.setTimeJs(i.current)}}else t.navigateTo({url:"../login/index"})}},fail:function(){t.showToast({title:"网络错误,请重试"})}})},checkTi:function(i){if(this.check_ti=i,"1"==i){if("0"==this.current)return;this.current--,this.currentQid--}if("2"==i){if(this.timeNums[this.current]>0&&"is_end"!=this.user_answer.ti_data[this.current])return void t.showToast({icon:"none",title:"请先答当前题目"});this.current==this.tiList.length-1&&this.subTests(),this.current++,this.currentQid++,this.setTimeJs(this.current)}},subTests:function(){var i=this,n=a.globalData.site_url+"/appapi/?s=Tests.subTestsIndex";t.request({url:n,method:"GET",data:{uid:a.globalData.userInfo.id,token:a.globalData.userInfo.token,testsid:0,answer:JSON.stringify(i.user_ans),start_time:i.start_time},success:function(n){0==n.data.data.code?(i.result=n.data.data.info,t.navigateTo({url:"./result?info="+encodeURIComponent(JSON.stringify(i.result))})):t.showToast({icon:"none",title:n.data.data.msg})},fail:function(){t.showToast({icon:"none",title:"网络错误"})}})}}};i.default=r}).call(this,n("543d")["default"])},"6afa":function(t,i,n){"use strict";(function(t){n("b8f1");e(n("66fd"));var i=e(n("ff4d"));function e(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=n,t(i.default)}).call(this,n("543d")["createPage"])},"786b":function(t,i,n){"use strict";var e;n.d(i,"b",(function(){return s})),n.d(i,"c",(function(){return a})),n.d(i,"a",(function(){return e}));var s=function(){var t=this,i=t.$createElement,n=(t._self._c,void 0!=t.tiList[t.current]&&"2"==t.tiList[t.current].type?t.__map(t.tiList[t.current].answer.ans,(function(i,n){var e=t.__get_orig(i),s="is_checked"==t.dingxiang.abc[t.current][n]?t.tiList[t.current].answer.rs.indexOf(n):null,a="is_checked"==t.dingxiang.abc[t.current][n]&&"-1"==s?t.tiList[t.current].answer.rs.indexOf(n):null,r="is_checked"==t.dingxiang.abc[t.current][n]&&"-1"==s?t.dingxiang.ans[t.current].indexOf(n):null;return{$orig:e,g0:s,g1:a,g2:r}})):null),e=void 0!=t.tiList[t.current]&&"2"!=t.tiList[t.current].type&&4==t.tiList[t.current].type?t.__map(t.tiList[t.current].answer.ans,(function(i,n){var e=t.__get_orig(i),s="is_end"!=t.user_answer.ti_data[t.current]?parseInt(n):null;return{$orig:e,m0:s}})):null;t.$mp.data=Object.assign({},{$root:{l0:n,l1:e}})},a=[]},b818:function(t,i,n){"use strict";var e=n("2cb4"),s=n.n(e);s.a},ef2f:function(t,i,n){"use strict";n.r(i);var e=n("3b77"),s=n.n(e);for(var a in e)"default"!==a&&function(t){n.d(i,t,(function(){return e[t]}))}(a);i["default"]=s.a},ff4d:function(t,i,n){"use strict";n.r(i);var e=n("786b"),s=n("ef2f");for(var a in s)"default"!==a&&function(t){n.d(i,t,(function(){return s[t]}))}(a);n("b818");var r,c=n("f0c5"),u=Object(c["a"])(s["default"],e["b"],e["c"],!1,null,null,null,!1,e["a"],r);i["default"]=u.exports}},[["6afa","common/runtime","common/vendor"]]]);